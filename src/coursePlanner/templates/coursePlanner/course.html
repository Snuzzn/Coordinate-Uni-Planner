{% extends 'base.html' %}
{% load static %}

{% block content %}

<h1>{{ course.courseCode }}: {{course.courseName }}</p>

<h2>Course Contacts <a href="{% url 'coursePlanner:newContact' course.id %}">
  <img src="{% static 'images/plus.svg' %}" class="add-btn"></a></h2>
<div class="card-list">
  {% for contact in contacts %}     
    <div class="card {% cycle 'blue-purple'  'coral' 'sky-blue' 'pink-purple' %}">
      {% block editContact %}

      <header>
      {{ contact.role }}
      </header>
      
      <div class="card-text-medium">{{ contact.name }}</div>
      <div class="card-text-small">{{ contact.email }}</div>
      <div class="card-text-small">{{ contact.location }}</div>

      <a href="{% url 'coursePlanner:editContact' course_id=course.id contact_id=contact.id %}">
        <i class="far fa-edit"></i></a>
       {% endblock editContact %}
   
       {% block deleteContact %}
       <a href="{% url 'coursePlanner:deleteContact' course_id=course.id contact_id=contact.id %}">
        <i class="far fa-trash-alt"></i></a>
       {% endblock deleteContact %}

    </div>

  {% endfor %}
</div>

{% block newContact %}
{% endblock newContact %}


<h2>Links</h2>
<ul>
  {% for link in links %}
    <li>
      {% block editLink %}
      <a href={{link.link}}>{{ link.title }}</a>
      <a href="{% url 'coursePlanner:editLink' course_id=course.id link_id=link.id %}">
        <button>Edit</button></a>
      {% endblock editLink %}

      {% block deleteLink %}
        <a href="{% url 'coursePlanner:deleteLink' course_id=course.id link_id=link.id %}">
        <button>Delete</button></a>
      {% endblock deleteLink %}
    </li>
  {% endfor %}
</ul>   
 
{% block newLink %}
<p><a href="{% url 'coursePlanner:newLink' course.id %}">
<button>Add a new link</button>
</a></p>
{% endblock newLink %}


<h2>Assessments</h2>
<table class="assessment-table">
  <tr class="assessment-header-row">
    <th>Task</th>
    <th>Weighting</th>
    <th>My Grade</th>
    <th></th>
    <th></th>
  </tr>
  {% for assessment in assessments %}
    <tr>
      {% block editAssessment %}
        <td>{{ assessment.task }}</td>
        <td>{{ assessment.weighting }}%</td>
        {% if  assessment.myGrade is None %} 
        <td></td> 
        {% else %}
        <td>{{ assessment.myGrade }}%</td>
        {% endif %} 

        <td><a href="{% url 'coursePlanner:editAssessment' course_id=course.id assessment_id=assessment.id %}">
          <button><i class="far fa-edit"></i></button></a>
          {% block deleteAssessment %}
          <a href="{% url 'coursePlanner:deleteAssessment' course_id=course.id assessment_id=assessment.id %}">
            <button><i class="far fa-trash-alt"></i></button></a>
          {% endblock deleteAssessment %}
        </td>
      {% endblock editAssessment %}


    </tr>
  {% endfor %}

{% block newAssessment %}
</table>
<p><a href="{% url 'coursePlanner:newAssessment' course.id %}">
<button>Add a new assessment</button></a></p>
{% endblock newAssessment %}
<ul>
  {% for message in assessmentMessages %}
    <li>{{ message }}</li>
  {% endfor %}
</ul>


<h2>Queries</h2>
<ul>
  {% for query in queries %}
    <li>
      {% block editQuery %}
      {{ query }}
      <a href="{% url 'coursePlanner:editQuery' course_id=course.id query_id=query.id %}">
        <button>Edit</button></a>
      {% endblock editQuery %}
      
      {% block deleteQuery %}
      <a href="{% url 'coursePlanner:deleteQuery' course_id=course.id query_id=query.id %}">
        <button>Delete</button></a>
      {% endblock deleteQuery %}
    </li>
  {% endfor %}
</ul>

{% block newQuery %}
<a href="{% url 'coursePlanner:newQuery' course.id %}">
<button>Add a new query</button></a>
{% endblock newQuery %}


{% endblock content %}
